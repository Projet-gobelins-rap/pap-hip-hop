<template>
  <section class="battle--mobile">
    <div class="battle-head">
      <h2 class="battle-head--title">Fais ton choix</h2>
      <div class="battle-head--intro">
        <p>Essaie de trouver une punch qui claque et qui répond bien à Franck</p>
      </div>
      <svg class="battle-head--icon" width="113" height="197" viewBox="0 0 113 197" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g opacity="0.5">
          <g filter="url(#filter0_d_1966_1405)">
            <mask id="path-1-outside-1_1966_1405" maskUnits="userSpaceOnUse" x="-2.51267" y="4.93304" width="111.673" height="180.235" fill="black">
              <rect fill="white" x="-2.51267" y="4.93304" width="111.673" height="180.235"/>
              <path d="M56.0554 64.1815L35.002 70.2184C33.5377 70.6383 32.747 72.2449 33.2823 73.7125L63.3204 156.056C63.8037 157.381 65.2013 158.113 66.5232 157.734L75.7003 155.103C77.0222 154.724 77.8194 153.362 77.5272 151.982L59.3654 66.2333C59.0417 64.705 57.5197 63.7616 56.0554 64.1815Z"/>
              <path d="M30.6261 69.9487L29.6107 68.8405C28.2594 67.3658 28.8922 64.9737 30.7765 64.4334L56.6559 57.0126C58.5203 56.478 60.3144 58.1318 59.9884 60.0845L59.7431 61.5541C59.5747 62.5631 58.857 63.3781 57.8937 63.6544L33.275 70.7137C32.3281 70.9852 31.3051 70.6897 30.6261 69.9487Z"/>
              <path d="M62.994 54.1637C64.3448 50.3052 64.6907 45.4675 64.1928 41.0541C64.0173 39.4989 62.485 38.5491 61.0171 38.97L17.4338 51.4673C15.9659 51.8882 15.1697 53.5057 15.845 54.9176C17.7616 58.9242 20.6185 62.8435 23.8087 65.3999C24.4253 65.8939 25.2369 66.0219 25.9838 65.8077L61.3655 55.6622C62.1124 55.448 62.7329 54.9094 62.994 54.1637Z"/>
              <path d="M32.5516 21.9443C20.5423 25.3879 13.0767 37.0867 14.2758 49.3794C14.4278 50.9368 15.9659 51.8882 17.4338 51.4673L61.0171 38.97C62.485 38.5491 63.2852 36.9272 62.5887 35.5259C57.0915 24.4657 44.5609 18.5006 32.5516 21.9443Z"/>
              <path d="M74.4917 155.449L67.8376 157.357C66.2858 157.802 65.5106 159.566 66.207 161.067L69.0717 167.242C69.6274 168.44 70.947 169.06 72.1854 168.705L76.7384 167.399C77.9651 167.047 78.7542 165.841 78.6078 164.541L77.8442 157.764C77.6574 156.106 76.0561 155.001 74.4917 155.449Z"/>
            </mask>
            <path d="M56.0554 64.1815L35.002 70.2184C33.5377 70.6383 32.747 72.2449 33.2823 73.7125L63.3204 156.056C63.8037 157.381 65.2013 158.113 66.5232 157.734L75.7003 155.103C77.0222 154.724 77.8194 153.362 77.5272 151.982L59.3654 66.2333C59.0417 64.705 57.5197 63.7616 56.0554 64.1815Z" fill="#ED6787"/>
            <path d="M30.6261 69.9487L29.6107 68.8405C28.2594 67.3658 28.8922 64.9737 30.7765 64.4334L56.6559 57.0126C58.5203 56.478 60.3144 58.1318 59.9884 60.0845L59.7431 61.5541C59.5747 62.5631 58.857 63.3781 57.8937 63.6544L33.275 70.7137C32.3281 70.9852 31.3051 70.6897 30.6261 69.9487Z" fill="#ED6787"/>
            <path d="M62.994 54.1637C64.3448 50.3052 64.6907 45.4675 64.1928 41.0541C64.0173 39.4989 62.485 38.5491 61.0171 38.97L17.4338 51.4673C15.9659 51.8882 15.1697 53.5057 15.845 54.9176C17.7616 58.9242 20.6185 62.8435 23.8087 65.3999C24.4253 65.8939 25.2369 66.0219 25.9838 65.8077L61.3655 55.6622C62.1124 55.448 62.7329 54.9094 62.994 54.1637Z" fill="#ED6787"/>
            <path d="M32.5516 21.9443C20.5423 25.3879 13.0767 37.0867 14.2758 49.3794C14.4278 50.9368 15.9659 51.8882 17.4338 51.4673L61.0171 38.97C62.485 38.5491 63.2852 36.9272 62.5887 35.5259C57.0915 24.4657 44.5609 18.5006 32.5516 21.9443Z" fill="#ED6787"/>
            <path d="M74.4917 155.449L67.8376 157.357C66.2858 157.802 65.5106 159.566 66.207 161.067L69.0717 167.242C69.6274 168.44 70.947 169.06 72.1854 168.705L76.7384 167.399C77.9651 167.047 78.7542 165.841 78.6078 164.541L77.8442 157.764C77.6574 156.106 76.0561 155.001 74.4917 155.449Z" fill="#ED6787"/>
            <path d="M18.5363 55.3124L62.1196 42.8151L59.9145 35.125L16.3312 47.6223L18.5363 55.3124ZM59.3654 66.2333L67.1918 64.5757L59.3654 66.2333ZM77.5272 151.982L85.3536 150.325L77.5272 151.982ZM63.3204 156.056L70.836 153.315L63.3204 156.056ZM33.2823 73.7125L40.7979 70.9709L33.2823 73.7125ZM29.6107 68.8405L23.7123 74.2451L23.7123 74.2451L29.6107 68.8405ZM30.6261 69.9487L36.5245 64.5441L36.5244 64.5441L30.6261 69.9487ZM59.7431 61.5541L67.634 62.8712L67.634 62.8712L59.7431 61.5541ZM59.9884 60.0845L52.0976 58.7674L52.0976 58.7674L59.9884 60.0845ZM64.1928 41.0541L56.2432 41.9509L56.2432 41.9509L64.1928 41.0541ZM62.994 54.1637L70.5446 56.8071L70.5446 56.8071L62.994 54.1637ZM23.8087 65.3999L28.8112 59.1569L28.8112 59.1569L23.8087 65.3999ZM15.845 54.9176L8.62817 58.3697L15.845 54.9176ZM14.2758 49.3794L22.238 48.6027L22.238 48.6027L14.2758 49.3794ZM62.5887 35.5259L69.7526 31.9652L69.7526 31.9652L62.5887 35.5259ZM77.8442 157.764L85.7939 156.868L77.8442 157.764ZM78.6078 164.541L70.658 165.437L78.6078 164.541ZM69.0717 167.242L76.3288 163.875L69.0717 167.242ZM66.207 161.067L58.9499 164.433L66.207 161.067ZM37.2071 77.9085L58.2605 71.8716L53.8503 56.4914L32.7969 62.5283L37.2071 77.9085ZM51.539 67.891L69.7008 153.64L85.3536 150.325L67.1918 64.5757L51.539 67.891ZM73.4952 147.413L64.3181 150.044L68.7283 165.424L77.9054 162.793L73.4952 147.413ZM70.836 153.315L40.7979 70.9709L25.7668 76.4541L55.8048 158.798L70.836 153.315ZM64.3181 150.044C67.1964 149.219 69.939 150.856 70.836 153.315L55.8048 158.798C57.6683 163.906 63.2062 167.008 68.7283 165.424L64.3181 150.044ZM69.7008 153.64C69.1585 151.08 70.6169 148.238 73.4952 147.413L77.9054 162.793C83.4274 161.209 86.4803 155.644 85.3536 150.325L69.7008 153.64ZM58.2605 71.8716C55.0624 72.7886 52.1327 70.6942 51.539 67.891L67.1918 64.5757C65.9507 58.7159 59.9771 54.7346 53.8503 56.4914L58.2605 71.8716ZM32.7969 62.5283C26.6702 64.2852 23.7141 70.827 25.7668 76.4541L40.7979 70.9709C41.7799 73.6628 40.4052 76.9915 37.2071 77.9085L32.7969 62.5283ZM23.7123 74.2451L24.7277 75.3533L36.5244 64.5441L35.509 63.4359L23.7123 74.2451ZM35.4801 78.4038L60.0988 71.3445L55.6886 55.9643L31.0699 63.0236L35.4801 78.4038ZM67.634 62.8712L67.8793 61.4015L52.0976 58.7674L51.8523 60.2371L67.634 62.8712ZM54.4508 49.3225L28.5714 56.7433L32.9816 72.1235L58.861 64.7027L54.4508 49.3225ZM67.8793 61.4015C69.1196 53.9704 62.2788 47.0779 54.4508 49.3225L58.861 64.7027C54.7618 65.8781 51.5091 62.2932 52.0976 58.7674L67.8793 61.4015ZM60.0988 71.3445C64.1058 70.1955 66.9712 66.8421 67.634 62.8712L51.8523 60.2371C52.1783 58.2841 53.6082 56.5608 55.6886 55.9643L60.0988 71.3445ZM24.7277 75.3533C27.4029 78.2729 31.5424 79.5329 35.4801 78.4038L31.0699 63.0236C33.1139 62.4375 35.2072 63.1066 36.5245 64.5441L24.7277 75.3533ZM35.509 63.4359C37.9485 66.0982 37.1259 70.9351 32.9816 72.1235L28.5714 56.7433C20.6585 59.0123 18.5704 68.6333 23.7123 74.2451L35.509 63.4359ZM56.2432 41.9509C56.6405 45.4723 56.307 49.0533 55.4433 51.5203L70.5446 56.8071C72.3826 51.5572 72.7409 45.4628 72.1424 40.1573L56.2432 41.9509ZM28.1889 73.4978L63.5706 63.3522L59.1604 47.9721L23.7787 58.1176L28.1889 73.4978ZM28.8112 59.1569C26.7715 57.5225 24.591 54.6623 23.0619 51.4655L8.62817 58.3697C10.9321 63.1862 14.4655 68.1646 18.8062 71.6429L28.8112 59.1569ZM23.0619 51.4655C24.6437 54.7724 22.6538 58.2929 19.6389 59.1574L15.2287 43.7772C9.27794 45.4836 5.69563 52.239 8.62817 58.3697L23.0619 51.4655ZM55.4433 51.5202C56.1202 49.5867 57.6554 48.4036 59.1604 47.9721L63.5706 63.3522C66.5693 62.4924 69.3456 60.232 70.5446 56.8071L55.4433 51.5202ZM23.7787 58.1176C25.2837 57.6861 27.2126 57.8759 28.8112 59.1569L18.8062 71.6429C21.638 73.912 25.1902 74.3577 28.1889 73.4978L23.7787 58.1176ZM72.1424 40.1573C71.3805 33.4042 64.7627 29.5736 58.812 31.2799L63.2222 46.6601C60.2073 47.5246 56.6542 45.5936 56.2432 41.9509L72.1424 40.1573ZM22.238 48.6027C21.3928 39.9378 26.6603 31.956 34.7567 29.6344L30.3465 14.2542C14.4243 18.8198 4.76063 34.2356 6.31362 50.156L22.238 48.6027ZM34.7567 29.6344C42.8531 27.3127 51.5499 31.2904 55.4248 39.0865L69.7526 31.9652C62.6331 17.6409 46.2687 9.68854 30.3465 14.2542L34.7567 29.6344ZM55.4248 39.0865C53.7296 35.6758 55.843 32.1313 58.812 31.2799L63.2222 46.6601C69.127 44.9669 72.8408 38.1786 69.7526 31.9652L55.4248 39.0865ZM6.31362 50.156C6.98726 57.0618 13.7341 60.8506 19.6389 59.1574L15.2287 43.7772C18.1976 42.9259 21.8683 44.8119 22.238 48.6027L6.31362 50.156ZM70.0427 165.047L76.6968 163.139L72.2866 147.759L65.6325 149.667L70.0427 165.047ZM69.8945 158.659L70.658 165.437L86.5575 163.646L85.7939 156.868L69.8945 158.659ZM74.5333 159.709L69.9803 161.015L74.3905 176.395L78.9435 175.089L74.5333 159.709ZM76.3288 163.875L73.4641 157.7L58.9499 164.433L61.8146 170.609L76.3288 163.875ZM69.9803 161.015C72.6721 160.243 75.2888 161.633 76.3288 163.875L61.8146 170.609C63.9661 175.246 69.222 177.877 74.3905 176.395L69.9803 161.015ZM70.658 165.437C70.3837 163.002 71.8677 160.473 74.5333 159.709L78.9435 175.089C84.0626 173.621 87.1247 168.681 86.5575 163.646L70.658 165.437ZM76.6968 163.139C73.2737 164.121 70.2348 161.68 69.8945 158.659L85.7939 156.868C85.0801 150.532 78.8384 145.88 72.2866 147.759L76.6968 163.139ZM65.6325 149.667C59.1338 151.531 56.287 158.693 58.9499 164.433L73.4641 157.7C74.7342 160.438 73.4377 164.074 70.0427 165.047L65.6325 149.667Z" fill="#ED6787" mask="url(#path-1-outside-1_1966_1405)"/>
          </g>
          <path d="M56.703 63.9961L34.3544 70.4045C33.2393 70.7243 32.6292 71.9226 33.0268 73.0124L63.5391 156.656C63.8989 157.643 64.9601 158.183 65.9693 157.893L76.2541 154.944C77.2633 154.655 77.877 153.634 77.6594 152.607L59.2109 65.5043C58.9705 64.3694 57.8181 63.6764 56.703 63.9961Z" fill="#FEFEFE"/>
          <path d="M59.2109 65.5043L60.1892 65.297L60.1892 65.297L59.2109 65.5043ZM77.6594 152.607L78.6377 152.4L77.6594 152.607ZM63.5391 156.656L62.5997 156.999L63.5391 156.656ZM33.0268 73.0124L32.0873 73.3551L33.0268 73.0124ZM34.63 71.3658L56.9786 64.9574L56.4273 63.0349L34.0788 69.4432L34.63 71.3658ZM58.2326 65.7115L76.6811 152.815L78.6377 152.4L60.1892 65.297L58.2326 65.7115ZM75.9785 153.983L65.6936 156.932L66.2449 158.855L76.5297 155.906L75.9785 153.983ZM64.4786 156.314L33.9662 72.6697L32.0873 73.3551L62.5997 156.999L64.4786 156.314ZM65.6936 156.932C65.189 157.077 64.6584 156.807 64.4786 156.314L62.5997 156.999C63.1393 158.478 64.7311 159.289 66.2449 158.855L65.6936 156.932ZM76.6811 152.815C76.7899 153.328 76.4831 153.838 75.9785 153.983L76.5297 155.906C78.0435 155.471 78.964 153.941 78.6377 152.4L76.6811 152.815ZM56.9786 64.9574C57.5362 64.7975 58.1124 65.144 58.2326 65.7115L60.1892 65.297C59.8286 63.5947 58.1 62.5552 56.4273 63.0349L56.9786 64.9574ZM34.0788 69.4432C32.4061 69.9229 31.491 71.7204 32.0873 73.3551L33.9662 72.6697C33.7674 72.1248 34.0725 71.5256 34.63 71.3658L34.0788 69.4432Z" fill="#151515"/>
          <path d="M30.8963 70.2436L28.8388 67.9981C27.835 66.9026 28.3339 65.1339 29.7621 64.7244L57.6489 56.728C59.0622 56.3227 60.415 57.5296 60.1729 58.9798L59.6759 61.9578C59.5489 62.7185 58.9958 63.3385 58.2544 63.551L32.9221 70.815C32.1931 71.024 31.4086 70.8027 30.8963 70.2436Z" fill="#ED6787"/>
          <path d="M28.8388 67.9981L28.1015 68.6736L28.1015 68.6736L28.8388 67.9981ZM30.8963 70.2436L31.6336 69.568L30.8963 70.2436ZM59.6759 61.9578L60.6622 62.1224L60.6622 62.1224L59.6759 61.9578ZM60.1729 58.9798L59.1866 58.8151L59.1866 58.8151L60.1729 58.9798ZM28.1015 68.6736L30.159 70.9192L31.6336 69.568L29.5761 67.3225L28.1015 68.6736ZM33.1978 71.7762L58.5301 64.5123L57.9788 62.5898L32.6465 69.8537L33.1978 71.7762ZM60.6622 62.1224L61.1593 59.1444L59.1866 58.8151L58.6895 61.7932L60.6622 62.1224ZM57.3733 55.7667L29.4864 63.7631L30.0377 65.6857L57.9246 57.6892L57.3733 55.7667ZM61.1593 59.1444C61.5223 56.9692 59.4932 55.1589 57.3733 55.7667L57.9246 57.6892C58.6312 57.4866 59.3076 58.0901 59.1866 58.8151L61.1593 59.1444ZM58.5301 64.5123C59.6421 64.1934 60.4717 63.2635 60.6622 62.1224L58.6895 61.7932C58.626 62.1735 58.3495 62.4835 57.9788 62.5898L58.5301 64.5123ZM30.159 70.9192C30.9275 71.7579 32.1043 72.0898 33.1978 71.7762L32.6465 69.8537C32.282 69.9582 31.8897 69.8476 31.6336 69.568L30.159 70.9192ZM29.5761 67.3225C29.0742 66.7748 29.3236 65.8904 30.0377 65.6857L29.4864 63.7631C27.3441 64.3774 26.5959 67.0305 28.1015 68.6736L29.5761 67.3225Z" fill="#151515"/>
          <path d="M62.8943 54.4417C64.4064 50.3247 64.7408 45.0249 64.1006 40.3127C63.9441 39.1604 62.785 38.4632 61.6672 38.7837L16.7837 51.6539C15.6659 51.9744 15.0523 53.1799 15.5302 54.24C17.4844 58.5754 20.5765 62.8928 24.0405 65.5829C24.5153 65.9516 25.1406 66.0496 25.7185 65.8839L61.6308 55.5862C62.2087 55.4205 62.6871 55.006 62.8943 54.4417Z" fill="#ED6787"/>
          <path d="M64.1006 40.3127L65.0915 40.178L65.0915 40.178L64.1006 40.3127ZM62.8943 54.4417L63.833 54.7865L63.833 54.7865L62.8943 54.4417ZM24.0405 65.5829L24.6538 64.7931L24.6538 64.7931L24.0405 65.5829ZM15.5302 54.24L16.4418 53.8291L15.5302 54.24ZM16.7837 51.6539L16.508 50.6926L16.508 50.6926L16.7837 51.6539ZM61.6672 38.7837L61.9428 39.745L61.6672 38.7837ZM63.1097 40.4473C63.7337 45.0401 63.3984 50.1687 61.9556 54.097L63.833 54.7865C65.4144 50.4807 65.7479 45.0096 65.0915 40.178L63.1097 40.4473ZM25.9941 66.8452L61.9064 56.5475L61.3552 54.625L25.4428 64.9227L25.9941 66.8452ZM24.6538 64.7931C21.3486 62.2263 18.3466 58.0547 16.4418 53.8291L14.6185 54.6509C16.6222 59.0961 19.8043 63.5592 23.4271 66.3727L24.6538 64.7931ZM17.0593 52.6151L61.9428 39.745L61.3916 37.8225L16.508 50.6926L17.0593 52.6151ZM16.4418 53.8291C16.2339 53.3678 16.4808 52.781 17.0593 52.6151L16.508 50.6926C14.8509 51.1678 13.8707 52.9919 14.6185 54.6509L16.4418 53.8291ZM61.9556 54.097C61.868 54.3356 61.6541 54.5392 61.3552 54.625L61.9064 56.5475C62.7632 56.3018 63.5061 55.6764 63.833 54.7865L61.9556 54.097ZM25.4428 64.9227C25.1439 65.0084 24.8546 64.949 24.6538 64.7931L23.4271 66.3727C24.1759 66.9542 25.1373 67.0909 25.9941 66.8452L25.4428 64.9227ZM65.0915 40.178C64.8466 38.3748 63.0487 37.3473 61.3916 37.8225L61.9428 39.745C62.5213 39.5791 63.0416 39.946 63.1097 40.4473L65.0915 40.178Z" fill="#151515"/>
          <path d="M32.5516 21.9444C20.3006 25.4573 12.7781 37.5611 14.3588 50.1223C14.504 51.2761 15.6659 51.9744 16.7837 51.6539L61.6672 38.7837C62.785 38.4632 63.4003 37.2553 62.912 36.1999C57.5961 24.7097 44.8026 18.4315 32.5516 21.9444Z" fill="#EDCC50"/>
          <path d="M14.3588 50.1223L15.351 49.9975L15.351 49.9975L14.3588 50.1223ZM62.912 36.1999L62.0045 36.6198L62.0045 36.6198L62.912 36.1999ZM15.351 49.9975C13.8285 37.899 21.0753 26.2755 32.8272 22.9057L32.276 20.9831C19.5259 24.6392 11.7276 37.2231 13.3666 50.2472L15.351 49.9975ZM32.8272 22.9057C44.5792 19.5358 56.8844 25.5529 62.0045 36.6198L63.8196 35.78C58.3078 23.8665 45.026 17.3271 32.276 20.9831L32.8272 22.9057ZM61.3916 37.8225L16.508 50.6926L17.0593 52.6151L61.9428 39.745L61.3916 37.8225ZM62.0045 36.6198C62.2122 37.0688 61.9734 37.6556 61.3916 37.8225L61.9428 39.745C63.5966 39.2708 64.5884 37.4418 63.8196 35.78L62.0045 36.6198ZM13.3666 50.2472C13.5952 52.0638 15.4055 53.0893 17.0593 52.6151L16.508 50.6926C15.9262 50.8594 15.4127 50.4884 15.351 49.9975L13.3666 50.2472Z" fill="#151515"/>
          <path d="M75.2126 155.243L67.1258 157.561C65.9457 157.9 65.3462 159.212 65.8628 160.326L69.3156 167.768C69.7303 168.662 70.7341 169.121 71.6812 168.849L77.2354 167.257C78.1738 166.987 78.7809 166.08 78.6716 165.11L77.7513 156.941C77.6127 155.712 76.4021 154.901 75.2126 155.243Z" fill="#ED6787"/>
          <path d="M77.7513 156.941L76.7575 157.053L77.7513 156.941ZM78.6716 165.11L77.6779 165.222L78.6716 165.11ZM69.3156 167.768L70.2228 167.348L69.3156 167.768ZM65.8628 160.326L66.77 159.905L65.8628 160.326ZM67.4015 158.523L75.4882 156.204L74.9369 154.281L66.8502 156.6L67.4015 158.523ZM76.7575 157.053L77.6779 165.222L79.6653 164.998L78.745 156.829L76.7575 157.053ZM76.9598 166.295L71.4055 167.888L71.9568 169.81L77.5111 168.218L76.9598 166.295ZM70.2228 167.348L66.77 159.905L64.9557 160.746L68.4085 168.189L70.2228 167.348ZM71.4055 167.888C70.932 168.024 70.4301 167.794 70.2228 167.348L68.4085 168.189C69.0304 169.53 70.5362 170.218 71.9568 169.81L71.4055 167.888ZM77.6779 165.222C77.7325 165.707 77.429 166.161 76.9598 166.295L77.5111 168.218C78.9187 167.814 79.8292 166.453 79.6653 164.998L77.6779 165.222ZM75.4882 156.204C76.0829 156.033 76.6883 156.438 76.7575 157.053L78.745 156.829C78.5372 154.985 76.7212 153.77 74.9369 154.281L75.4882 156.204ZM66.8502 156.6C65.0799 157.108 64.1807 159.076 64.9557 160.746L66.77 159.905C66.5116 159.348 66.8114 158.692 67.4015 158.523L66.8502 156.6Z" fill="#151515"/>
          <path d="M53.308 80.3602L46.0481 82.4419C44.9403 82.7596 44.3295 83.9453 44.7139 85.0317L50.5701 101.581C50.9228 102.577 51.9904 103.127 53.0068 102.836L58.2139 101.343C59.2302 101.051 59.8442 100.019 59.6151 98.987L55.8117 81.8494C55.5621 80.7244 54.4157 80.0426 53.308 80.3602Z" fill="#EDCC50"/>
          <path d="M55.8117 81.8494L54.8355 82.0661L54.8355 82.0661L55.8117 81.8494ZM59.6151 98.987L58.6388 99.2037L59.6151 98.987ZM50.5701 101.581L49.6273 101.914L50.5701 101.581ZM44.7139 85.0317L45.6566 84.6981L44.7139 85.0317ZM46.3237 83.4032L53.5836 81.3215L53.0323 79.3989L45.7724 81.4807L46.3237 83.4032ZM54.8355 82.0661L58.6388 99.2037L60.5913 98.7704L56.788 81.6328L54.8355 82.0661ZM57.9382 100.382L52.7311 101.875L53.2824 103.797L58.4895 102.304L57.9382 100.382ZM51.5128 101.247L45.6566 84.6981L43.7712 85.3653L49.6273 101.914L51.5128 101.247ZM52.7311 101.875C52.2229 102.02 51.6891 101.745 51.5128 101.247L49.6273 101.914C50.1564 103.409 51.7579 104.234 53.2824 103.797L52.7311 101.875ZM58.6388 99.2037C58.7534 99.7198 58.4464 100.236 57.9382 100.382L58.4895 102.304C60.0141 101.867 60.9349 100.319 60.5913 98.7704L58.6388 99.2037ZM53.5836 81.3215C54.1375 81.1626 54.7107 81.5035 54.8355 82.0661L56.788 81.6328C56.4135 79.9452 54.694 78.9225 53.0323 79.3989L53.5836 81.3215ZM45.7724 81.4807C44.1108 81.9572 43.1945 83.7357 43.7712 85.3653L45.6566 84.6981C45.4644 84.1549 45.7698 83.562 46.3237 83.4032L45.7724 81.4807Z" fill="#151515"/>
        </g>
        <defs>
          <filter id="filter0_d_1966_1405" x="0.150665" y="0.965332" width="112.474" height="195.843" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
            <feFlood flood-opacity="0" result="BackgroundImageFix"/>
            <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
            <feOffset dx="10" dy="4"/>
            <feGaussianBlur stdDeviation="8"/>
            <feComposite in2="hardAlpha" operator="out"/>
            <feColorMatrix type="matrix" values="0 0 0 0 0.0823529 0 0 0 0 0.0823529 0 0 0 0 0.0823529 0 0 0 0.16 0"/>
            <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_1966_1405"/>
            <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_1966_1405" result="shape"/>
          </filter>
        </defs>
      </svg>
      <div class="battle-head--separator"></div>
    </div>
    <h1 ref="timer"></h1>
    <Onboarding :content="currentOnboarding"></Onboarding>
    <Choice v-if="displayChoice" :multiple-choice="false" :content="battlePunchline"></Choice>

    <div class="timer">
      <div class="timer-indicator">
        <span class="timer-indicator--second" ref="timerIndicator"></span>
        <span>sec</span>
      </div>
      <div class="timer-gauge">
        <span ref="ccc"></span>
      </div>
    </div>

  </section>
</template>

<script lang="ts">
import {Vue, Component, getModule, Watch} from "nuxt-property-decorator";
import CustomButton from "~/components/buttons/button.vue";
import $socket from "~/plugins/socket.io";
import battleStore from "../../../store/battleStore";
import Choice from '~/components/Choice'
import Onboarding from '../../../components/contentOverlays/onboarding'
import onboardingStore from "../../../store/onboardingStore";
import choiceStore from "~/store/choiceStore";
import {gsap} from 'gsap'
import emitter from 'tiny-emitter/instance'

@Component({
  components: {
    CustomButton,
    Choice,
    Onboarding
  },
  async asyncData({ $prismic, error }) {
    try {
      const battleContent = (await $prismic.api.getSingle("battle")).data;

      console.log(battleContent,'content du bbattlle (mobile)')
      const battleOnboarding = battleContent?.slices2[0].items;
      const battlePunchRound1 = battleContent?.slices3[0].items;
      const battleOnboardingRound2 = battleContent?.slices5[0].items;
      const battleOnboardingRound2Action = battleContent?.slices5[0];
      const battlePunchline = battlePunchRound1

      const round2Step1 = battleContent?.slices6[0].items;
      const round2Step2 = battleContent?.slices7[0].items;
      const round2Step3 = battleContent?.slices8[0].items;
      const round2Step4 = battleContent?.slices9[0].items;

      const currentOnboarding = battleOnboarding[1];

      return {
        battlePunchRound1,
        battleOnboardingRound2,
        battleOnboardingRound2Action,
        currentOnboarding,
        battlePunchline,
        battleOnboarding,
        round2Step1,
        round2Step2,
        round2Step3,
        round2Step4
      };
    } catch (e) {
      // Returns error page
      //   error({ statusCode: 404, message: 'Content not found' })
    }
  },
})
export default class round2Mobile extends Vue {
  public codeValue:number | null = null
  public battleStore = getModule(battleStore,this.$store)
  public onboardingStore = getModule(onboardingStore, this.$store)
  public battlePunchRound1: object;
  public currentOnboarding: object
  public displayChoice:boolean = false
  public choiceStore = getModule(choiceStore,this.$store)
  public onboardingCounter:number = 1
  public battleOnboardingRound2:object
  public roundStep: number = 0
  public battleOnboarding:object
  public battlePunchline:object
  public round2Step1:object
  public round2Step2:object
  public round2Step3:object
  public round2Step4:object
  public timer:HTMLElement
  public timerGauge:HTMLElement
  public timerIndicator:HTMLElement
  public timerVal = { value: 20 };
  public tl:GSAPTimeline
  public tl2:GSAPTimeline
  mounted() {
    this.timer = this.$refs.timer as HTMLElement
    this.timerGauge = this.$refs.timerGauge as HTMLElement
    this.timerIndicator = this.$refs.timerIndicator as HTMLElement

    this.displayOnboarding()

    this.initRound2Datas()
    this.updateChoiceState()
    this.initRound2()
    this.round2Sequence()
  }

  updateNum() {
    this.$refs.timerIndicator.innerHTML = this.timerVal.value.toFixed(0)
  }

  initRound2(){
    $socket.io.on('battle::round2',()=>{
      this.displayRound2Onboarding()
      this.choiceStore.setMultipleChoice(false)
    })
  }


  displayOnboarding() {
    this.onboardingStore.setOnboardingDisplay(true)
  }

  hideOnboarding() {
    this.onboardingStore.setOnboardingDisplay(false)
  }

  displayRound2Onboarding() {
    this.currentOnboarding = this.battleOnboardingRound2
    console.log(this.currentOnboarding,'<--- OBR2')
    this.displayOnboarding()
  }

  updateChoiceState() {

    this.$on('choice::updateState',()=>{
      this.currentOnboarding = this.battleOnboarding[1]
      this.displayChoice = false
      this.displayOnboarding()

    })
  }

  @Watch("onboardingStep", { immediate: true, deep: true })
  setOnboardingStep(val: string) {
    if (val) {

      switch (val) {
        case "reading":
          break;
        case "startRound2":
          this.hideOnboarding()
          this.displayRound2Punch();
          this.displayBattlePlayers()
          this.onboardingStore.setOnboardingStep("reading");
          break;
      }
    }
  }

  displayBattlePlayers() {
    $socket.io.emit('battle::mobileToAddObject')
  }

  round2Sequence(){
    $socket.io.on('battle::round2Sequence',()=>{
      this.displayRound2Punch()
    })
  }

  initRound2Datas() {
    this.battleStore.setRound2Datas([this.round2Step1,this.round2Step2,this.round2Step3,this.round2Step4])
  }

  // GETTERS
  get onboardingStep() {
    return this.onboardingStore.onboardingStep;
  }

  timerAnimation() {
   //  this.tl = gsap.timeline();
   //  // gsap.to('.timer-indicator--second',{duration:this.timerVal.value,})
   // this.tl.to(".timer-gauge span", {width:0,ease:'none', duration:20,
   //   onStart:()=>{
   //     gsap.to(this.timerVal,{value:0,ease: "none",duration:this.timerVal.value,onUpdate:this.updateNum})
   //   },
   //   onComplete:()=>{
   //     this.currentOnboarding = this.battleOnboarding[1]
   //     this.displayOnboarding()
   //     this.displayChoice = false
   //     $socket.io.emit('battle::response',null)
   //   }})
   //    //add blueGreenSpin label 1 second after end of timeline
   //    .addLabel("timerHalf", 2)
   //    //add tween at blueGreenSpin label
   //    .to(".timer-gauge span", {backgroundColor:'#EDCC50', duration:1}, "timerHalf")
   //    .to(".timer-indicator", {color:'#EDCC50', duration:1}, "timerHalf")
   //
   //    .addLabel("timerPastHalf", 'timerHalf+=5')
   //
   //    .to(".timer-gauge span", {backgroundColor:'#ED6787', duration:1}, "timerPastHalf")
   //    .to(".timer-indicator", {color:'#ED6787', duration:1}, "timerPastHalf")


  }

  displayRound2Punch(){
    console.log("R2 PUNCH")
    let timeleft = 10
    this.battlePunchline = this.battleStore.round2Datas[this.roundStep]
    this.hideOnboarding()
    this.displayChoice = true


    this.tl = gsap.timeline();
    this.tl2 = gsap.timeline();

    // gsap.to('.timer-indicator--second',{duration:this.timerVal.value,})

    gsap.to('.timer',{opacity:1})
    this.tl2.to(this.timerVal,{value:0,ease: "none",duration:this.timerVal.value,onUpdate:this.updateNum})
    this.tl.to(".timer-gauge span", {width:0,ease:'none', duration:20,
      onStart:()=>{
      },
      onComplete:()=>{
        this.currentOnboarding = this.battleOnboarding[1]
        this.displayOnboarding()
        this.displayChoice = false
        $socket.io.emit('battle::response',null)
      }})
      //add blueGreenSpin label 1 second after end of timeline
      .addLabel("timerHalf", 2)
      //add tween at blueGreenSpin label
      .to(".timer-gauge span", {backgroundColor:'#EDCC50', duration:1}, "timerHalf")
      .to(".timer-indicator", {color:'#EDCC50', duration:1}, "timerHalf")

      .addLabel("timerPastHalf", 'timerHalf+=5')

      .to(".timer-gauge span", {backgroundColor:'#ED6787', duration:1}, "timerPastHalf")
      .to(".timer-indicator", {color:'#ED6787', duration:1}, "timerPastHalf")


    // this.timerAnimation()
    // on clear le timer si on a cliquer sur un bouton
    this.$on('choice::updateState',()=>{

      console.log('🚧🚧🚧update state🚧🚧🚧🚧')

      gsap.to('.timer',{opacity:0})
      this.tl.restart()
      this.tl.kill()

      this.tl2.restart()
      this.tl2.kill()

      // return
    })

    console.log(this.roundStep,'STEP de chaque round')
    if (this.roundStep >3){
      console.log('FIN DE LINTERACTION')
      // clearInterval(timerInterval)
      return
    }

    this.roundStep++

  }

}
</script>

<style lang="sass" scoped>

</style>
